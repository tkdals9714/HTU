<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="sec"
	uri="http://www.springframework.org/security/tags"%>
<link rel="stylesheet" href="/resources/css/bootstrap.min.css">
<script src="/resources/js/jquery.min.js"></script>

<style>
.content {
	display: flex;
	justify-content: flex-start;
}

.animated {
	width: 80%;
}

.row {
	margin-left: -15px; /* Adjusted margin */
}

.col-md-12 {
	width: 100%;
}

.card {
	width: 120%; /* Adjusted width */
}

#bootstrap-data-table th:first-child, #bootstrap-data-table td:first-child
	{
	width: 4%; /* Adjusted width for No column */
}

#bootstrap-data-table th, #bootstrap-data-table td {
	text-align: center;
}
</style>

<!-- 부트스트랩 시작 -->

<div class="content">
	<div class="animated fadeIn">
		<div class="row">

			<div class="col-md-12">
				<div class="card">
					<div class="card-header">
						</br>
						<h3>
							<strong class="card-title">자유 게시판</strong>
						</h3>
					</div>
					<a href="/common/board/free/create"
						style="display: inline-block; padding: 10px 13px; background-color: #800020; color: #fff; text-decoration: none; font-weight: 300; border-radius: 5px; position: absolute; right: 30px; top: 25px;">
						글쓰기</a>
					<div class="card-body">
						<div id="bootstrap-data-table_wrapper"
							class="dataTables_wrapper container-fluid dt-bootstrap4 no-footer">
							<div class="row">
								<div class="col-sm-12 col-md-6">
									<div class="dataTables_length" id="bootstrap-data-table_length">
									</div>
								</div>
								<div class="col-sm-12 col-md-6"></div>
							</div>
							<div class="row">
								<div class="col-sm-12">
									<table id="bootstrap-data-table"
										class="table table-striped table-bordered dataTable no-footer"
										role="grid" aria-describedby="bootstrap-data-table_info">
										<thead>
											<tr role="row">
												<th>No</th>
												<th>제목</th>
												<th>작성자</th>
												<th>작성일</th>
												<th>조회수</th>
											</tr>
										</thead>
										<tbody>
											<c:forEach var="boardVO" items="${boardList}"
												varStatus="stat">
												<tr role="row" class="odd">
													<td style="padding-right: 2px;">${stat.count}</td>
													<td><a class="btnDetail" href="#"
														data-board-code="${boardVO.bdCd}">${boardVO.bdTitle}</a></td>
													<td>${boardVO.userCd}</td>
													<td><fmt:formatDate value="${boardVO.bdReg}"
															pattern="yyyy-MM-dd" /></td>
													<td>${boardVO.bdCnt}</td>
												</tr>
											</c:forEach>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 부트스트랩 끝 -->


<script>
	$(".btnDetail").on("click", function (event) {
		
		const bdCd = $(this).data("boardCode")
		
		$.ajax({
			
			url: "/common/board/free/count?bdCd="+bdCd,
			type: "get",
			beforeSend:function(xhr){
				xhr.setRequestHeader("${_csrf.headerName}","${_csrf.token}");
			},
			success: (res) => {
				if (res != null) {
					location.href = "/common/board/free/detail?bdCd="+bdCd;
				}
			}
		});
		
	})
</script>


