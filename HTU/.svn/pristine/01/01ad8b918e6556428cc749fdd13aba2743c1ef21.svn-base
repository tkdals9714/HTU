<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>

<script src="/resources/js/gridstack-all.js"></script>
<link rel="stylesheet" href="/resources/css/gridstack.min.css">
<style>
 .grid-stack {
    background-color: #EEF1F6;
  }

  .grid-stack-item {
    background-color: #EEF1F6;
    border: 1px solid #ebebeb;
    padding: 50px;
  }

  /* 각각의 item에 패딩을 줌 */
  .gs-id-0 > .grid-stack-item > .grid-stack-item-content {
    padding:5px;
  }

  .main_portlet_wrap{
    background-color: #ffffff; width:100%; height:100%; padding:20px; position:relative;
  }

  .pcalender, .pnotice{
    font-size: 13px; font-weight: 500; border: 1px solid #dddddd; padding:5px 10px; height:25px; text-wrap: nowrap; white-space: nowrap; background-color: #ebebeb; z-index: 997; margin-top: 1px;
  }

  .active{
    background-color: #ffffff; border-bottom: none;
  }

  .pcalendercon, .pnoticecon{
    display: none;
  }
</style>

<div class="grid-stack"></div>


<script>
  /* 컨트롤러에서 받아온 userVO값 */
  const jsonUserVO = JSON.parse('${jsonUserVO}');
  console.log(jsonUserVO);

  /* 1.프로필 */
  let content_profile= `
    <div class="main_portlet_wrap">
      <div style="position:absolute; width:60%; display:flex; flex-direction:column; align-items:center; top:50%; left:50%; transform:translate(-50%,-50%);">

        <div style="width:100px; height:100px; border-radius: 100px; overflow: hidden;">
    `
    /* 이미지파일이있으면 해당이미지 출력, 없으면 unknown 이미지 출력 */
    if (jsonUserVO.filesDetailVO != null) {
      content_profile += `<img src="/resources/upload/\${jsonUserVO.filesDetailVO.fileSvnm}" style="width:100%; height: 100%; object-fit: cover;"/>`
    } else {
      content_profile += `<img style="width:100%; height: 100%; object-fit: cover;" src="/resources/images/unknownperson.jpg" alt="unknown">`
    }
  content_profile += `    
          <img style="width:100%; height: 100%; object-fit: cover;" src="/resources/images/unknownperson.jpg" alt="unknown">
        </div>

        <input value='\${jsonUserVO.userNm}' style="width:100%; text-align:center; font-size: 18px; font-weight: 500; color:#333333; margin-top:25px;">

        <div style="display: flex; align-items:center; margin-top:10px; text-wrap:nowrap; white-space:nowrap;">
          <input value='\${jsonUserVO.studentVO.departmentVO.depNm}' style="width:100%; text-align:center; font-size: 14px; font-weight: 400; color:#555555;">
          <span>&nbsp;/&nbsp;</span>
          <input value='\${jsonUserVO.userCd}' style="width:100%; text-align:center; font-size: 14px; font-weight: 400; color:#555555;">
        </div>
    </div>
  `
  /* 2.캘린더 */

  /* 캘린더(학사일정,개인일정) */
    $(document).ready(function () {
      //처음엔 학사일정을 보여준다
      $('.pcalendercon1').show();

      //버튼클릭에 따라 학사일정 또는 개인일정 한개만 보이게 한다
      $(".pcalender").on("click", function (e) {
        e.preventDefault();
        var targetId = $(this).attr('href');
        $('.pcalendercon').hide();
        $(targetId).show();
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
      })
    });

  let content_calender=`
    <div class="main_portlet_wrap">
      <div style="display:flex; flex-direction:column; align-items:center; width:100%; height:100%; position:relative;">
        <div style="display:flex; top:0; left:0; position:absolute;">
          <a href="#portletschoolcalender" class="pcalender active">학사일정</a>
          <a href="#portletmycalender" class="pcalender">개인일정</a>
        </div>

        <div id="portletschoolcalender" class="pcalendercon pcalendercon1" style="width: 100%; height: calc(100% - 25px); border: 1px solid #dddddd; position:absolute; top:25px;">
          학사일정캘린더넣으시면됩니다 ~
        </div>

        <div id="portletmycalender" class="pcalendercon" style="width: 100%; height: calc(100% - 25px); border: 1px solid #dddddd; position:absolute; top:25px;">
          개인일정캘린더넣으시면됩니다 ~
        </div>

      </div>
    </div>
    `
  /* 3.커뮤니티 */

    $(document).ready(function () {
      //처음엔 공지사항을 보여준다
      $('.pnoticecon1').show();

      //버튼클릭에 따라 한개만 보이게 한다
      $(".pnotice").on("click", function (e) {
        e.preventDefault();
        var targetId = $(this).attr('href');
        $('.pnoticecon').hide();
        $(targetId).show();
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
      })
    });

    let content_community = `
    <div class="main_portlet_wrap">
      <div style="display:flex; flex-direction:column; align-items:center; width:100%; height:100%; position:relative;">
        <div style="display:flex; top:0; left:0; position:absolute;">
          <a href="#portletnotice1" class="pnotice active">공지</a>
          <a href="#portletnotice2" class="pnotice">자유</a>
          <a href="#portletnotice3" class="pnotice">익명</a>
          <a href="#portletnotice4" class="pnotice">홍보</a>
        </div>

        <div id="portletnotice1" class="pnoticecon pnoticecon1" style="width: 100%; height: calc(100% - 25px); border: 1px solid #dddddd; position:absolute; top:25px;">
          <div style="display:flex; align-items:center; padding:10px 5px; border-bottom: 1px solid #dddddd;">
            <span style="font-size:12px; color:#888888; flex:1;">[공지]</span>
            <div style="flex:5; font-size:13px; color:#333333; overflow:hidden; display:block; text-overflow:ellipsis; white-space:nowrap; word-break: break-all;">
              여기다가 이제 들어갈내용 쌓으시면됨니다 이거 늘어나면 말 다 보이지롱 키키
            </div>
            <span style="font-size:12px; color:#888888; flex:1;">23.12.11</span>
          </div>
        </div>

        <div id="portletnotice2" class="pnoticecon" style="width: 100%; height: calc(100% - 25px); border: 1px solid #dddddd; position:absolute; top:25px;">
          <div style="display:flex; align-items:center; padding:10px 5px; border-bottom: 1px solid #dddddd;">
            <span style="font-size:12px; color:#888888; flex:1;">[자유]</span>
            <div style="flex:5; font-size:13px; color:#333333; overflow:hidden; display:block; text-overflow:ellipsis; white-space:nowrap; word-break: break-all;">
              이거 늘어나면 말 다 보이지롱 키키
            </div>
            <span style="font-size:12px; color:#888888; flex:1;">23.12.11</span>
          </div>
        </div>

        <div id="portletnotice3" class="pnoticecon" style="width: 100%; height: calc(100% - 25px); border: 1px solid #dddddd; position:absolute; top:25px;">
          <div style="display:flex; align-items:center; padding:10px 5px; border-bottom: 1px solid #dddddd;">
            <span style="font-size:12px; color:#888888; flex:1;">[익명]</span>
            <div style="flex:5; font-size:13px; color:#333333; overflow:hidden; display:block; text-overflow:ellipsis; white-space:nowrap; word-break: break-all;">
              익명익명익명익명익명익명익명익명익명익명익명익명익명익명
            </div>
            <span style="font-size:12px; color:#888888; flex:1;">23.12.11</span>
          </div>
        </div>

        <div id="portletnotice4" class="pnoticecon" style="width: 100%; height: calc(100% - 25px); border: 1px solid #dddddd; position:absolute; top:25px;">
          <div style="display:flex; align-items:center; padding:10px 5px; border-bottom: 1px solid #dddddd;">
            <span style="font-size:12px; color:#888888; flex:1;">[홍보]</span>
            <div style="flex:5; font-size:13px; color:#333333; overflow:hidden; display:block; text-overflow:ellipsis; white-space:nowrap; word-break: break-all;">
              홍보홍보홍보홍보홍보홍보홍보홍보홍보홍보홍보홍보홍보홍보홍보홍보
            </div>
            <span style="font-size:12px; color:#888888; flex:1;">23.12.11</span>
          </div>
        </div>

      </div>
    </div>
    `
  
  /* 내강의실 */
  let content_classroom = `
  <div class="main_portlet_wrap" style="height:100vh;">
    <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 50% 50%; gap:10px;">
      <div style="border:1px solid red; width:100%;">
        <div style="">
          <input value="과목명" style="color:#333333; font-size:12px; background-color:#FFE9E9; width:100%; height:50px;"/>
          
        </div>
      </div>
      
    </div>
  </div>
  `

  const items = [
    
    {x: 0, y: 0, w: 3, h: 3, content: content_profile}, 
    {x: 3, y: 0, w: 3, h: 3, content: content_calender},
    {x: 6, y: 0, w: 3, h: 3, content: content_community},
    {x: 9, y: 0, w: 3, h: 3, content: content_classroom},
    {x: 0, y: 3, w: 3, h: 3, content: '5'}, 
    {x: 3, y: 3, w: 3, h: 3, content: '6'},
    {x: 6, y: 3, w: 3, h: 3, content: '7'},
    {x: 9, y: 3, w: 3, h: 3, content: '8'},
  ];
  const grid = GridStack.init({
    cellHeight: '7rem'
  });
  grid.load(items, true);
</script>