<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mapper.UserMapper">
	
	<resultMap type="userVO" id="userMap">
		<result property="userCd" column="USER_CD"/>
		<result property="userNm" column="USER_NM"/>
		<result property="userNme" column="USER_NME"/>
		<result property="userTel" column="USER_TEL"/>
		<result property="userZip" column="USER_ZIP"/>
		<result property="userAddr1" column="USER_ADDR1"/>
		<result property="userAddr2" column="USER_ADDR2"/>
		<result property="userReg1" column="USER_REG1"/>
		<result property="userReg2" column="USER_REG2"/>
		<result property="userMail" column="USER_MAIL"/>
		<result property="userPass" column="USER_PASS"/>
		<result property="userBank" column="USER_BANK"/>
		<result property="userDepo" column="USER_DEPO"/>
		<result property="userAcc" column="USER_ACC"/>
		<result property="fileCd" column="FILE_CD"/>
		<result property="comdCd" column="COMD_CD"/>
		<association property="commonDetailVO" resultMap="cdMap"/>
	</resultMap>
	
	<resultMap type="commonDetailVO" id="cdMap">
		<result property="comdCd" column="COMD_CD"/>
		<result property="comCd" column="COM_CD"/>
		<result property="comdNm" column="COMD_NM"/>
		<result property="comdDesc" column="COMD_DESC"/>
		<association property="commonVO" resultMap="commonMap"/>
	</resultMap>
	
	<resultMap type="commonVO" id="commonMap">
		<result property="comCd" column="COM_CD"/>
		<result property="comNm" column="COM_NM"/>
		<result property="comDesc" column="COM_DESC"/>
	</resultMap>
	
	
	<select id="getUser" resultMap="userMap" parameterType="String">
		SELECT 	USER_CD, USER_NM, USER_NME, USER_TEL, USER_ZIP, USER_ADDR1, USER_ADDR2, 
				USER_REG1, USER_REG2, USER_MAIL, USER_PASS, USER_BANK, USER_DEPO, USER_ACC, 
				FILE_CD, USERS.COMD_CD, CD.COM_CD, COMD_NM, COMD_DESC, COM_NM, COM_DESC
		FROM 	USERS, COMMON_DETAIL CD, COMMON C
		WHERE 	USER_CD = #{userCd}
		AND 	USERS.COMD_CD = CD.COMD_CD
		AND 	CD.COM_CD = C.COM_CD
	</select>
	
</mapper>